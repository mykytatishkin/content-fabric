# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è Voice Changer üß™

## –®–≤–∏–¥–∫–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞

### –ö—Ä–æ–∫ 1: –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

```bash
pip install -r requirements.txt
```

–¶–µ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:
- `pydub` - –æ–±—Ä–æ–±–∫–∞ –∞—É–¥—ñ–æ
- `praat-parselmouth` - —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è –≥–æ–ª–æ—Å—É
- `soundfile` - —á–∏—Ç–∞–Ω–Ω—è/–∑–∞–ø–∏—Å –∞—É–¥—ñ–æ
- `numpy` - –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
- `librosa` - –∞–Ω–∞–ª—ñ–∑ –∞—É–¥—ñ–æ
- `moviepy` - –æ–±—Ä–æ–±–∫–∞ –≤—ñ–¥–µ–æ

### –ö—Ä–æ–∫ 2: –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å FFmpeg

**macOS:**
```bash
brew install ffmpeg
```

**Ubuntu/Debian:**
```bash
sudo apt-get update
sudo apt-get install ffmpeg
```

### –ö—Ä–æ–∫ 3: –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Ç–µ—Å—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç

```bash
# –ë–∞–∑–æ–≤–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ (–±–µ–∑ –æ–±—Ä–æ–±–∫–∏ —Ñ–∞–π–ª—ñ–≤)
python test_voice_changer.py

# –ü–æ–≤–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑ —Ç–µ—Å—Ç–æ–≤–∏–º —Ñ–∞–π–ª–æ–º
python test_voice_changer.py /path/to/test/video.mp4
```

## –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Ç–µ—Å—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç

1. ‚úÖ **–ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ** - —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –≤—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –ø–∞–∫–µ—Ç–∏
2. ‚úÖ **FFmpeg** - —á–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π FFmpeg
3. ‚úÖ **–Ü–º–ø–æ—Ä—Ç** - —á–∏ –º–æ–∂–Ω–∞ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ VoiceChanger
4. ‚úÖ **–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è** - —á–∏ –º–æ–∂–Ω–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –µ–∫–∑–µ–º–ø–ª—è—Ä VoiceChanger
5. ‚úÖ **–ü—Ä–µ—Å–µ—Ç–∏** - —á–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ –≥–æ—Ç–æ–≤—ñ –ø—Ä–µ—Å–µ—Ç–∏
6. ‚úÖ **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è** - —á–∏ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –∑ —Å–∏—Å—Ç–µ–º–æ—é –∑–∞–¥–∞—á
7. ‚úÖ **–û–±—Ä–æ–±–∫–∞ —Ñ–∞–π–ª—É** - —á–∏ –ø—Ä–∞—Ü—é—î –æ–±—Ä–æ–±–∫–∞ —Ä–µ–∞–ª—å–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ (—è–∫—â–æ –ø–µ—Ä–µ–¥–∞–Ω–æ —Ç–µ—Å—Ç–æ–≤–∏–π —Ñ–∞–π–ª)

## –†—É—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –¢–µ—Å—Ç 1: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ CLI

```bash
# –ü–æ–∫–∞–∑–∞—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ –ø—Ä–µ—Å–µ—Ç–∏
python run_voice_changer.py --list-presets

# –ü–æ–∫–∞–∑–∞—Ç–∏ –¥–æ–≤—ñ–¥–∫—É
python run_voice_changer.py --help
```

–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: —Å–ø–∏—Å–æ–∫ –ø—Ä–µ—Å–µ—Ç—ñ–≤ —Ç–∞ –æ–ø—Ü—ñ—ó –∫–æ–º–∞–Ω–¥–∏.

### –¢–µ—Å—Ç 2: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –∞—É–¥—ñ–æ —Ñ–∞–π–ª—É

–°—Ç–≤–æ—Ä—ñ—Ç—å –ø—Ä–æ—Å—Ç–∏–π —Ç–µ—Å—Ç–æ–≤–∏–π –∞—É–¥—ñ–æ —Ñ–∞–π–ª –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ —ñ—Å–Ω—É—é—á–∏–π:

```bash
python run_voice_changer.py test_audio.wav output_audio.wav --type male_to_female
```

–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- –§–∞–π–ª `output_audio.wav` —Å—Ç–≤–æ—Ä–µ–Ω–∏–π
- –ì–æ–ª–æ—Å –∑–º—ñ–Ω–µ–Ω–∏–π –∑ —á–æ–ª–æ–≤—ñ—á–æ–≥–æ –Ω–∞ –∂—ñ–Ω–æ—á–∏–π
- –ù–µ–º–∞—î –ø–æ–º–∏–ª–æ–∫

### –¢–µ—Å—Ç 3: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è –≤—ñ–¥–µ–æ —Ñ–∞–π–ª—É

```bash
python run_voice_changer.py test_video.mp4 output_video.mp4 --type male_to_female
```

–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- –§–∞–π–ª `output_video.mp4` —Å—Ç–≤–æ—Ä–µ–Ω–∏–π
- –í—ñ–¥–µ–æ –∑–∞–ª–∏—à–∏–ª–æ—Å—å —Ç–∞–∫–∏–º —Å–∞–º–∏–º
- –ê—É–¥—ñ–æ–¥–æ—Ä—ñ–∂–∫–∞ –∑–º—ñ–Ω–µ–Ω–∞

### –¢–µ—Å—Ç 4: –ü–∞–∫–µ—Ç–Ω–∞ –æ–±—Ä–æ–±–∫–∞

```bash
# –°—Ç–≤–æ—Ä—ñ—Ç—å –ø–∞–ø–∫—É –∑ —Ç–µ—Å—Ç–æ–≤–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏
mkdir test_videos
# –î–æ–¥–∞–π—Ç–µ —Ç—É–¥–∏ –≤—ñ–¥–µ–æ/–∞—É–¥—ñ–æ —Ñ–∞–π–ª–∏

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å –ø–∞–∫–µ—Ç–Ω—É –æ–±—Ä–æ–±–∫—É
python run_voice_changer.py --batch test_videos/ output_videos/ --type male_to_female
```

–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- –í—Å—ñ —Ñ–∞–π–ª–∏ –æ–±—Ä–æ–±–ª–µ–Ω—ñ
- –ü–æ–∫–∞–∑–∞–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (—Å–∫—ñ–ª—å–∫–∏ —É—Å–ø—ñ—à–Ω–æ, —Å–∫—ñ–ª—å–∫–∏ –∑ –ø–æ–º–∏–ª–∫–∞–º–∏)

### –¢–µ—Å—Ç 5: –ü—Ä–æ–≥—Ä–∞–º–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ç–µ—Å—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç `test_api.py`:

```python
from core.utils.voice_changer import change_voice

result = change_voice(
    input_file='test.mp4',
    output_file='output.mp4',
    conversion_type='male_to_female'
)

print(f"Success: {result['success']}")
print(f"Output: {result['output_file']}")
```

–ó–∞–ø—É—Å—Ç—ñ—Ç—å:
```bash
python test_api.py
```

### –¢–µ—Å—Ç 6: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —Å–∏—Å—Ç–µ–º–æ—é –∑–∞–¥–∞—á

```python
from core.database.mysql_db import YouTubeMySQLDatabase
from datetime import datetime
import json

db = YouTubeMySQLDatabase()

# –°—Ç–≤–æ—Ä—ñ—Ç—å –∑–∞–¥–∞—á—É
task_id = db.add_task(
    account_id=0,
    media_type='voice_change',
    title='–¢–µ—Å—Ç–æ–≤–∞ –∑–º—ñ–Ω–∞ –≥–æ–ª–æ—Å—É',
    description='–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—è —á–æ–ª–æ–≤—ñ—á–æ–≥–æ –≥–æ–ª–æ—Å—É –Ω–∞ –∂—ñ–Ω–æ—á–∏–π',
    att_file_path='/path/to/test/video.mp4',
    scheduled_time=datetime.now(),
    add_info=json.dumps({
        'conversion_type': 'male_to_female'
    })
)

print(f"–ó–∞–¥–∞—á–∞ —Å—Ç–≤–æ—Ä–µ–Ω–∞: ID = {task_id}")

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å –≤–æ—Ä–∫–µ—Ä–∞
# python run_task_worker.py

# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å
task = db.get_task_by_id(task_id)
print(f"–°—Ç–∞—Ç—É—Å: {task.status}")
```

## –û—á—ñ–∫—É–≤–∞–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

### ‚úÖ –£—Å–ø—ñ—à–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```
üéôÔ∏è  Voice Changer Test Suite
============================================================
Checking Dependencies
============================================================
‚úÖ pydub               - Audio processing
‚úÖ parselmouth        - Voice transformation (Praat)
‚úÖ soundfile          - Audio I/O
‚úÖ numpy              - Numerical operations
‚úÖ librosa            - Audio analysis
‚úÖ moviepy            - Video processing

‚úÖ All dependencies installed!

============================================================
Checking FFmpeg
============================================================
‚úÖ FFmpeg installed: ffmpeg version X.X.X

============================================================
Test Summary
============================================================
Dependencies         ‚úÖ PASSED
FFmpeg              ‚úÖ PASSED
Import              ‚úÖ PASSED
Initialization      ‚úÖ PASSED
Presets             ‚úÖ PASSED
Task Integration    ‚úÖ PASSED
File Processing     ‚úÖ PASSED
============================================================
Total: 7 | Passed: 7 | Failed: 0 | Skipped: 0
============================================================

üéâ All tests passed! Voice Changer is ready to use!
```

## –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è

### ‚ùå FFmpeg not found

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
‚ùå FFmpeg not found
```

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
# macOS
brew install ffmpeg

# Ubuntu/Debian
sudo apt-get install ffmpeg

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞
ffmpeg -version
```

### ‚ùå Missing dependencies

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
‚ùå parselmouth - Voice transformation (MISSING)
```

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
pip install praat-parselmouth
# –∞–±–æ
pip install -r requirements.txt
```

### ‚ùå Import error

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
ImportError: No module named 'parselmouth'
```

**–†—ñ—à–µ–Ω–Ω—è:**
```bash
# –ü–µ—Ä–µ–≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
pip uninstall praat-parselmouth
pip install praat-parselmouth

# –ê–±–æ –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –≤—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∑–∞–Ω–æ–≤–æ
pip install -r requirements.txt --force-reinstall
```

### ‚ùå Processing error

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
Error during voice conversion: ...
```

**–ú–æ–∂–ª–∏–≤—ñ –ø—Ä–∏—á–∏–Ω–∏:**
1. –ù–µ–≤—ñ—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª—É
2. –ü–æ—à–∫–æ–¥–∂–µ–Ω–∏–π —Ñ–∞–π–ª
3. –ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –ø–∞–º'—è—Ç—ñ
4. –ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –º—ñ—Å—Ü—è –Ω–∞ –¥–∏—Å–∫—É

**–†—ñ—à–µ–Ω–Ω—è:**
1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª—É (–º–∞—î –±—É—Ç–∏ MP4, WAV, MP3 —Ç–æ—â–æ)
2. –°–ø—Ä–æ–±—É–π—Ç–µ —ñ–Ω—à–∏–π —Ñ–∞–π–ª
3. –ó–∞–∫—Ä–∏–π—Ç–µ —ñ–Ω—à—ñ –ø—Ä–æ–≥—Ä–∞–º–∏
4. –ó–≤—ñ–ª—å–Ω—ñ—Ç—å –º—ñ—Å—Ü–µ –Ω–∞ –¥–∏—Å–∫—É

## –ü—Ä–∏–∫–ª–∞–¥–∏ —Ç–µ—Å—Ç–æ–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∞—É–¥—ñ–æ (–∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é FFmpeg)

```bash
# –°—Ç–≤–æ—Ä–∏—Ç–∏ 5-—Å–µ–∫—É–Ω–¥–Ω–∏–π —Ç–µ—Å—Ç–æ–≤–∏–π —Ç–æ–Ω
ffmpeg -f lavfi -i "sine=frequency=440:duration=5" test_tone.wav

# –ö–æ–Ω–≤–µ—Ä—Ç—É–≤–∞—Ç–∏ —ñ—Å–Ω—É—é—á–µ –≤—ñ–¥–µ–æ —É WAV
ffmpeg -i video.mp4 -vn -acodec pcm_s16le test_audio.wav
```

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —ñ—Å–Ω—É—é—á–æ–≥–æ –≤—ñ–¥–µ–æ

–í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ –±—É–¥—å-—è–∫–µ –≤—ñ–¥–µ–æ –∑ `data/content/videos/`:
```bash
python run_voice_changer.py data/content/videos/your_video.mp4 output.mp4 --type male_to_female
```

## Benchmark —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–í–∏–º—ñ—Ä—è–π—Ç–µ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å:

```python
import time
from core.utils.voice_changer import VoiceChanger

changer = VoiceChanger()

start_time = time.time()

result = changer.process_file(
    input_file='test.mp4',
    output_file='output.mp4',
    conversion_type='male_to_female',
    preserve_quality=True
)

elapsed_time = time.time() - start_time

print(f"Duration: {result.get('duration', 0)}s")
print(f"Processing time: {elapsed_time:.2f}s")
print(f"Speed ratio: {result.get('duration', 0) / elapsed_time:.2f}x")
```

## –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:

1. ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ CLI –¥–ª—è –æ–±—Ä–æ–±–∫–∏ —Ä–µ–∞–ª—å–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤
2. ‚úÖ –Ü–Ω—Ç–µ–≥—Ä—É–π—Ç–µ –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ä–æ–±–æ—á—ñ –ø—Ä–æ—Ü–µ—Å–∏
3. ‚úÖ –°—Ç–≤–æ—Ä—é–π—Ç–µ –∑–∞–¥–∞—á—ñ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É –∑–∞–¥–∞—á
4. ‚úÖ –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –≤–ª–∞—Å–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ pitch/formant

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

–ü–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è: [Voice Changer Guide](docs/guides/VOICE_CHANGER_GUIDE.md)  
–®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç: [Quick Start Guide](VOICE_CHANGER_QUICK_START.md)

---

**–£—Å–ø—ñ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è! üöÄ**
