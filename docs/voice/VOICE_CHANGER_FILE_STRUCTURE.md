# Voice Changer - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

–û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è —Ñ–∞–π–ª—ñ–≤ –º–µ—Ö–∞–Ω—ñ–∑–º—É –∑–º—ñ–Ω–∏ –≥–æ–ª–æ—Å—É –≤ –ø—Ä–æ–µ–∫—Ç—ñ.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
content-fabric/
‚îÇ
‚îú‚îÄ‚îÄ üîß –û—Å–Ω–æ–≤–Ω—ñ —Ñ–∞–π–ª–∏ (root)
‚îÇ   ‚îî‚îÄ‚îÄ run_voice_changer.py              # CLI —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∑–∞–ø—É—Å–∫—É
‚îÇ
‚îú‚îÄ‚îÄ üì¶ –û—Å–Ω–æ–≤–Ω–∏–π –º–æ–¥—É–ª—å (core/utils/)
‚îÇ   ‚îî‚îÄ‚îÄ voice_changer.py                  # –ö–ª–∞—Å VoiceChanger –∑ —É—Å—ñ—î—é –ª–æ–≥—ñ–∫–æ—é
‚îÇ
‚îú‚îÄ‚îÄ üß™ –¢–µ—Å—Ç–∏ (tests/)
‚îÇ   ‚îî‚îÄ‚îÄ test_voice_changer.py             # –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ç–µ—Å—Ç–∏
‚îÇ
‚îú‚îÄ‚îÄ üí° –ü—Ä–∏–∫–ª–∞–¥–∏ (examples/)
‚îÇ   ‚îî‚îÄ‚îÄ voice_changer_example.py          # –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
‚îÇ
‚îî‚îÄ‚îÄ üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è (docs/)
    ‚îú‚îÄ‚îÄ VOICE_CHANGER.md                  # –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
    ‚îú‚îÄ‚îÄ VOICE_CHANGER_QUICK_START.md      # –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç
    ‚îú‚îÄ‚îÄ VOICE_CHANGER_SUMMARY.md          # –ü—ñ–¥—Å—É–º–æ–∫ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó
    ‚îú‚îÄ‚îÄ TESTING_VOICE_CHANGER.md          # –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –∑ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
    ‚îî‚îÄ‚îÄ guides/
        ‚îú‚îÄ‚îÄ VOICE_CHANGER_GUIDE.md        # –ü–æ–≤–Ω–∏–π –ø–æ—Å—ñ–±–Ω–∏–∫
        ‚îî‚îÄ‚îÄ VOICE_CHANGER_README.md       # –î–µ—Ç–∞–ª—å–Ω–∏–π README
```

## üìÑ –û–ø–∏—Å —Ñ–∞–π–ª—ñ–≤

### –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

#### `run_voice_changer.py` (root)
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: CLI —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞
- **–†–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è**: –ö–æ—Ä–µ–Ω–µ–≤–∏–π –∫–∞—Ç–∞–ª–æ–≥ (–ø–æ—Ä—É—á –∑ —ñ–Ω—à–∏–º–∏ `run_*.py`)
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**: `python3 run_voice_changer.py input.mp4 output.mp4 --type male_to_female`

#### `core/utils/voice_changer.py`
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –û—Å–Ω–æ–≤–Ω–∏–π –º–æ–¥—É–ª—å –∑ –∫–ª–∞—Å–æ–º VoiceChanger
- **–§—É–Ω–∫—Ü—ñ—ó**:
  - –û–±—Ä–æ–±–∫–∞ –∞—É–¥—ñ–æ —Ç–∞ –≤—ñ–¥–µ–æ
  - –ó–º—ñ–Ω–∞ pitch —Ç–∞ formant
  - –ï–∫—Å—Ç—Ä–∞–∫—Ü—ñ—è —Ç–∞ –æ–±'—î–¥–Ω–∞–Ω–Ω—è –∞—É–¥—ñ–æ
  - –ü–∞–∫–µ—Ç–Ω–∞ –æ–±—Ä–æ–±–∫–∞
- **–Ü–º–ø–æ—Ä—Ç**: `from core.utils.voice_changer import VoiceChanger`

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

#### `tests/test_voice_changer.py`
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –ö–æ–º–ø–ª–µ–∫—Å–Ω—ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ —Ç–µ—Å—Ç–∏
- **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∏**:
  - –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
  - –ù–∞—è–≤–Ω—ñ—Å—Ç—å FFmpeg
  - –Ü–º–ø–æ—Ä—Ç –º–æ–¥—É–ª—ñ–≤
  - –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∫–ª–∞—Å—É
  - –î–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å –ø—Ä–µ—Å–µ—Ç—ñ–≤
  - –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ task system
  - –û–±—Ä–æ–±–∫–∞ —Ñ–∞–π–ª—ñ–≤ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
- **–ó–∞–ø—É—Å–∫**: `python3 tests/test_voice_changer.py`

### –ü—Ä–∏–∫–ª–∞–¥–∏

#### `examples/voice_changer_example.py`
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è —Ä—ñ–∑–Ω–∏—Ö —Å–ø–æ—Å–æ–±—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
- **–í–∫–ª—é—á–∞—î**:
  - –ü—Ä–∏–∫–ª–∞–¥ 1: –ü—Ä–æ—Å—Ç–∏–π —Å–ø–æ—Å—ñ–±
  - –ü—Ä–∏–∫–ª–∞–¥ 2: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–ª–∞—Å—É
  - –ü—Ä–∏–∫–ª–∞–¥ 3: –ü–∞–∫–µ—Ç–Ω–∞ –æ–±—Ä–æ–±–∫–∞
  - –ü—Ä–∏–∫–ª–∞–¥ 4: –†—ñ–∑–Ω—ñ –ø—Ä–µ—Å–µ—Ç–∏
  - –ü—Ä–∏–∫–ª–∞–¥ 5: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ task system
  - –ü—Ä–∏–∫–ª–∞–¥ 6: –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
- **–ó–∞–ø—É—Å–∫**: `python3 examples/voice_changer_example.py`

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

#### `docs/VOICE_CHANGER.md`
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –ì–æ–ª–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
- **–ó–º—ñ—Å—Ç**: –û–≥–ª—è–¥, —à–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç, –ø–æ—Å–∏–ª–∞–Ω–Ω—è

#### `docs/VOICE_CHANGER_QUICK_START.md`
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç –¥–ª—è –Ω–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- **–ó–º—ñ—Å—Ç**: –ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è –ø–æ—á–∞—Ç–∫—É —Ä–æ–±–æ—Ç–∏

#### `docs/VOICE_CHANGER_SUMMARY.md`
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –¢–µ—Ö–Ω—ñ—á–Ω–∏–π –ø—ñ–¥—Å—É–º–æ–∫ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó
- **–ó–º—ñ—Å—Ç**: –©–æ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ, —è–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏, acceptance criteria

#### `docs/TESTING_VOICE_CHANGER.md`
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –î–µ—Ç–∞–ª—å–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –∑ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- **–ó–º—ñ—Å—Ç**: –ü–æ–∫—Ä–æ–∫–æ–≤—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó, troubleshooting

#### `docs/guides/VOICE_CHANGER_GUIDE.md`
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –ü–æ–≤–Ω–∏–π –ø–æ—Å—ñ–±–Ω–∏–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- **–ó–º—ñ—Å—Ç**: 
  - –î–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
  - –í—Å—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
  - API —Ä–µ—Ñ–µ—Ä–µ–Ω—Å
  - Best practices
  - Troubleshooting

#### `docs/guides/VOICE_CHANGER_README.md`
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –î–µ—Ç–∞–ª—å–Ω–∏–π README –∑ —É—Å—ñ–º–∞ –¥–µ—Ç–∞–ª—è–º–∏
- **–ó–º—ñ—Å—Ç**: –ü–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

## üöÄ –Ø–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—è

### 1. CLI (Command Line Interface)

```bash
# –ë–∞–∑–æ–≤–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
python3 run_voice_changer.py input.mp4 output.mp4 --type male_to_female

# –î–æ–≤—ñ–¥–∫–∞
python3 run_voice_changer.py --help

# –°–ø–∏—Å–æ–∫ –ø—Ä–µ—Å–µ—Ç—ñ–≤
python3 run_voice_changer.py --list-presets
```

### 2. –ü—Ä–æ–≥—Ä–∞–º–Ω–∏–π API

```python
from core.utils.voice_changer import VoiceChanger

changer = VoiceChanger()
result = changer.process_file(
    input_file='video.mp4',
    output_file='output.mp4',
    conversion_type='male_to_female'
)
```

### 3. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –ë–∞–∑–æ–≤–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
python3 tests/test_voice_changer.py

# –ó —Ç–µ—Å—Ç–æ–≤–∏–º —Ñ–∞–π–ª–æ–º
python3 tests/test_voice_changer.py /path/to/video.mp4
```

### 4. –ü—Ä–∏–∫–ª–∞–¥–∏

```bash
# –ü–æ–∫–∞–∑–∞—Ç–∏ –ø—Ä–µ—Å–µ—Ç–∏
python3 examples/voice_changer_example.py

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥
python3 examples/voice_changer_example.py 1
```

## üìä –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ

–í—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤ `requirements.txt`:
- `pydub>=0.25.1` - –û–±—Ä–æ–±–∫–∞ –∞—É–¥—ñ–æ
- `praat-parselmouth>=0.4.3` - –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è –≥–æ–ª–æ—Å—É
- `soundfile>=0.12.1` - –ß–∏—Ç–∞–Ω–Ω—è/–∑–∞–ø–∏—Å –∞—É–¥—ñ–æ
- `numpy>=1.24.0` - –ú–∞—Ç–µ–º–∞—Ç–∏—á–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó
- `librosa>=0.10.0` - –ê–Ω–∞–ª—ñ–∑ –∞—É–¥—ñ–æ
- `moviepy>=1.0.3` - –û–±—Ä–æ–±–∫–∞ –≤—ñ–¥–µ–æ (–≤–∂–µ –±—É–ª–∞)

**–î–æ–¥–∞—Ç–∫–æ–≤–æ**: FFmpeg (—Å–∏—Å—Ç–µ–º–Ω–∞ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å)

## üîÑ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –ø—Ä–æ–µ–∫—Ç–æ–º

### Task Worker Integration

Voice Changer —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–∏–π –∑ —Å–∏—Å—Ç–µ–º–æ—é –∑–∞–¥–∞—á:

**–§–∞–π–ª**: `app/task_worker.py`

**–î–æ–¥–∞–Ω–æ**:
- –Ü–º–ø–æ—Ä—Ç VoiceChanger
- –ù–æ–≤–∏–π —Ç–∏–ø –∑–∞–¥–∞—á—ñ: `voice_change`
- –ú–µ—Ç–æ–¥ `_process_voice_change_task()`
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —á–µ—Ä–µ–∑ task worker

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**:
```python
from core.database.mysql_db import YouTubeMySQLDatabase
import json

db = YouTubeMySQLDatabase()
task_id = db.add_task(
    account_id=0,
    media_type='voice_change',
    title='Voice conversion',
    att_file_path='/path/to/video.mp4',
    add_info=json.dumps({
        'conversion_type': 'male_to_female'
    })
)
```

## üìã –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –Ω–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

- [ ] –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ: `pip install -r requirements.txt`
- [ ] –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ FFmpeg: `brew install ffmpeg` (macOS)
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Ç–µ—Å—Ç–∏: `python3 tests/test_voice_changer.py`
- [ ] –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ø—Ä–µ—Å–µ—Ç–∏: `python3 run_voice_changer.py --list-presets`
- [ ] –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –ø—Ä–∏–∫–ª–∞–¥–∏: `python3 examples/voice_changer_example.py`
- [ ] –ü—Ä–æ—á–∏—Ç–∞—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é: `docs/VOICE_CHANGER.md`

## üéØ –©–æ –¥–∞–ª—ñ?

1. **–ü–æ—á–∞—Ç–∫—ñ–≤–µ—Ü—å**: –ü–æ—á–Ω—ñ—Ç—å –∑ `docs/VOICE_CHANGER_QUICK_START.md`
2. **–†–æ–∑—Ä–æ–±–Ω–∏–∫**: –î–∏–≤—ñ—Ç—å—Å—è `examples/voice_changer_example.py`
3. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**: –ó–∞–ø—É—Å—Ç—ñ—Ç—å `tests/test_voice_changer.py`
4. **–ü–æ–≥–ª–∏–±–ª–µ–Ω–µ –≤–∏–≤—á–µ–Ω–Ω—è**: –ß–∏—Ç–∞–π—Ç–µ `docs/guides/VOICE_CHANGER_GUIDE.md`

---

**–û—Ä–≥–∞–Ω—ñ–∑–æ–≤–∞–Ω–æ —Ç–∞ –≥–æ—Ç–æ–≤–æ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è! ‚úÖ**
