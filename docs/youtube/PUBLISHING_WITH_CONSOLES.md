# üì∫ –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∫–æ–Ω—Å–æ–ª—è–º–∏

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ö–æ–≥–¥–∞ –≤—ã –¥–æ–±–∞–≤–ª—è–µ—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ Google Cloud Console –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç–µ –∏—Ö –∫–∞–Ω–∞–ª–∞–º, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ credentials –¥–ª—è –∫–∞–∂–¥–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

–ó–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –∫–∞–Ω–∞–ª—É:

```python
task = {
    'account_id': 1,  # ID –∫–∞–Ω–∞–ª–∞ –≤ –ë–î
    'title': 'Video Title',
    'att_file_path': '/path/to/video.mp4',
    ...
}
```

### 2. Task Worker –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á—É

–ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–¥–∞—á–∏:

1. **–ó–∞–≥—Ä—É–∂–∞–µ—Ç –∫–∞–Ω–∞–ª –∏–∑ –ë–î:**
   - –ü–æ–ª—É—á–∞–µ—Ç –∫–∞–Ω–∞–ª –ø–æ `account_id`
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ —É –∫–∞–Ω–∞–ª–∞ `console_id`

2. **–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç credentials:**
   - –ï—Å–ª–∏ `console_id` –µ—Å—Ç—å ‚Üí –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∫–æ–Ω—Å–æ–ª—å –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ—ë `client_id` –∏ `client_secret`
   - –ï—Å–ª–∏ `console_id` –Ω–µ—Ç ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `client_id` –∏ `client_secret` –∏–∑ —Å–∞–º–æ–≥–æ –∫–∞–Ω–∞–ª–∞

3. **–°–æ–∑–¥–∞–µ—Ç account_info:**
   ```python
   account_info = {
       'name': channel.name,
       'channel_id': channel.channel_id,
       'access_token': channel.access_token,      # –¢–æ–∫–µ–Ω –∫–∞–Ω–∞–ª–∞
       'refresh_token': channel.refresh_token,     # –¢–æ–∫–µ–Ω –∫–∞–Ω–∞–ª–∞
       'client_id': channel.client_id,             # ‚Üê –ò–∑ –∫–æ–Ω—Å–æ–ª–∏ (–µ—Å–ª–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞)
       'client_secret': channel.client_secret      # ‚Üê –ò–∑ –∫–æ–Ω—Å–æ–ª–∏ (–µ—Å–ª–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞)
   }
   ```

4. **–ó–∞–≥—Ä—É–∂–∞–µ—Ç –≤–∏–¥–µ–æ:**
   - `YouTubeClient` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `client_id` –∏ `client_secret` –∏–∑ `account_info`
   - –¢–æ–∫–µ–Ω—ã (access_token, refresh_token) –æ—Å—Ç–∞—é—Ç—Å—è –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–º–∏ –∫ –∫–∞–Ω–∞–ª—É
   - –ü—É–±–ª–∏–∫–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–≤–æ—Ç—É –∫–æ–Ω—Å–æ–ª–∏, –∫ –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–∏–≤—è–∑–∞–Ω –∫–∞–Ω–∞–ª

---

## üìä –ü—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –ö–∞–Ω–∞–ª—ã —Å —Ä–∞–∑–Ω—ã–º–∏ –∫–æ–Ω—Å–æ–ª—è–º–∏

```
Console 1 (10,000 –µ–¥–∏–Ω–∏—Ü/–¥–µ–Ω—å)
‚îú‚îÄ‚îÄ Channel 1 ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Console 1 credentials
‚îî‚îÄ‚îÄ Channel 2 ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Console 1 credentials

Console 2 (10,000 –µ–¥–∏–Ω–∏—Ü/–¥–µ–Ω—å)
‚îú‚îÄ‚îÄ Channel 3 ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Console 2 credentials
‚îî‚îÄ‚îÄ Channel 4 ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Console 2 credentials
```

**–ü—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:**
- –ó–∞–¥–∞—á–∞ –¥–ª—è Channel 1 ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Console 1 ‚Üí —Ç—Ä–∞—Ç–∏—Ç –∫–≤–æ—Ç—É Console 1
- –ó–∞–¥–∞—á–∞ –¥–ª—è Channel 3 ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Console 2 ‚Üí —Ç—Ä–∞—Ç–∏—Ç –∫–≤–æ—Ç—É Console 2
- –û–±—â–∞—è –¥–æ—Å—Ç—É–ø–Ω–∞—è –∫–≤–æ—Ç–∞: **20,000 –µ–¥–∏–Ω–∏—Ü/–¥–µ–Ω—å**

### –ü—Ä–∏–º–µ—Ä 2: –°–º–µ—à–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```
Console 1
‚îú‚îÄ‚îÄ Channel 1
‚îî‚îÄ‚îÄ Channel 2

Channel 3 (–±–µ–∑ –∫–æ–Ω—Å–æ–ª–∏, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–∏ credentials)
```

**–ü—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:**
- Channel 1 –∏ 2 ‚Üí –∏—Å–ø–æ–ª—å–∑—É—é—Ç Console 1
- Channel 3 ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–∏ credentials (–∏–∑ –∫–∞–Ω–∞–ª–∞ –∏–ª–∏ .env)

---

## ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**:
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–∞—è –∫–æ–Ω—Å–æ–ª—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –∫–∞–Ω–∞–ª—É
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ credentials –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
- –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–≤–æ—Ç—É –º–µ–∂–¥—É –∫–æ–Ω—Å–æ–ª—è–º–∏
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–í—ã –ø—Ä–æ—Å—Ç–æ:**
1. –î–æ–±–∞–≤–ª—è–µ—Ç–µ –∫–æ–Ω—Å–æ–ª–∏
2. –ù–∞–∑–Ω–∞—á–∞–µ—Ç–µ –∏—Ö –∫–∞–Ω–∞–ª–∞–º
3. –°–æ–∑–¥–∞–µ—Ç–µ –∑–∞–¥–∞—á–∏ –∫–∞–∫ –æ–±—ã—á–Ω–æ

–°–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–Ω–∞–ª–∞.

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π:

```bash
# –°–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ —Å –∏—Ö –∫–æ–Ω—Å–æ–ª—è–º–∏
python3 scripts/account_manager.py db list

# –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Å–æ–ª–µ–π
python3 scripts/account_manager.py console list
```

### SQL –∑–∞–ø—Ä–æ—Å:

```sql
SELECT 
    c.name as channel_name,
    g.name as console_name,
    g.project_id
FROM youtube_channels c
LEFT JOIN google_consoles g ON c.console_id = g.id
WHERE c.enabled = 1;
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

1. **–¢–æ–∫–µ–Ω—ã –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ Client ID:**
   - Access Token –∏ Refresh Token —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ `client_id`
   - –ï—Å–ª–∏ –º–µ–Ω—è–µ—Ç–µ –∫–æ–Ω—Å–æ–ª—å –¥–ª—è –∫–∞–Ω–∞–ª–∞, –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

2. **–ö–≤–æ—Ç–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
   - –ö–∞–∂–¥–∞—è –∫–æ–Ω—Å–æ–ª—å –∏–º–µ–µ—Ç —Å–≤–æ—é –Ω–µ–∑–∞–≤–∏—Å–∏–º—É—é –∫–≤–æ—Ç—É 10,000 –µ–¥–∏–Ω–∏—Ü/–¥–µ–Ω—å
   - –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∫–æ–Ω—Å–æ–ª—å

3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –°–ª–µ–¥–∏—Ç–µ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–≤–æ—Ç—ã –≤ Google Cloud Console
   - –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–π—Ç–µ –∫–∞–Ω–∞–ª—ã —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-01-XX

